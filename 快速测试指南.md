# 🧪 快速测试指南

## 一、播放按钮测试（5秒）

1. 打开 `index1.0.3.html`
2. 点击左侧"知识点库"标签
3. 点击"汽车刹车问题"卡片
4. 弹窗中点击"🎬 查看可视化动画"
5. **点击播放按钮 ▶️**
   - ✅ 应该看到红色物体在灰色背景上移动
   - ✅ 时间数字应该更新

---

## 二、例题详情弹窗测试（10秒）

### 测试步骤
1. 在知识点库中点击任意例题
2. **检查弹窗内容**
   - ✅ 显示题目标题和图标
   - ✅ 显示题型标签（蓝色）、难度标签（紫色）
   - ✅ 显示"📋 题目描述"区域
   - ✅ 显示"📊 已知参数"区域（网格布局）
   - ✅ 有"🎬 查看可视化动画"蓝紫渐变按钮
   - ✅ 有"取消"按钮

3. **点击"查看可视化动画"**
   - ✅ 弹窗关闭
   - ✅ 左侧参数自动填充
   - ✅ 页面平滑滚动到可视化区域
   - ✅ Canvas自动生成

---

## 三、视觉差异化测试（2分钟）

### 测试3个对比强烈的例题

#### 1️⃣ 汽车刹车（红色+灰色）
- 点击"汽车刹车问题"
- 点击"查看可视化"
- **预期效果：**
  - ✅ 背景：浅灰色 (#f3f4f6)
  - ✅ 地面：深灰色条带（底部1/4）
  - ✅ 物体：红色 (#ef4444)

#### 2️⃣ 篮球投篮（橙色+米黄）
- 点击"篮球投篮"
- 点击"查看可视化"
- **预期效果：**
  - ✅ 背景：米黄色 (#fef3c7)
  - ✅ 地面：棕色 (#d97706)
  - ✅ 物体：橙色 (#f97316)

#### 3️⃣ 地球卫星轨道（银色+深空+星星）
- 点击"地球卫星轨道"
- 点击"查看可视化"
- **预期效果：**
  - ✅ 背景：深蓝黑色 (#0f172a)
  - ✅ 星星：白色小点随机分布
  - ✅ 物体：银色 (#cbd5e1)

### 快速对比表

| 例题 | 背景颜色 | 物体颜色 | 地面/装饰 |
|------|---------|---------|----------|
| 汽车刹车 | 浅灰 | 红色 | 深灰路面 |
| 篮球投篮 | 米黄 | 橙色 | 棕色场地 |
| 卫星轨道 | 深蓝黑 | 银色 | 星星点缀 |

---

## 四、AI 解析测试（需要后端）⚠️

> 注意：此测试需要 Cloudflare Worker 后端正常运行

### 测试步骤
1. 在左侧输入框输入：
   ```
   一辆红色跑车以30m/s的速度刹车，加速度-5m/s²
   ```

2. 点击"应用提示"按钮

3. **检查结果：**
   - ✅ 弹出通知："✓ 已识别为【匀变速直线运动】- realistic风格"
   - ✅ 参数自动填充：
     - 初速度 v₀ = 30
     - 加速度 a = -5
   - ✅ 控制台日志：`🎨 AI返回的视觉参数: {objectType: "car", ...}`

4. 点击"生成可视化"

5. **检查视觉效果：**
   - ✅ 背景应为灰色（不是白色）
   - ✅ 物体应为红色（不是默认蓝色）
   - ✅ 有深灰色路面

### 如果后端未部署
- 系统会使用本地 fallback 解析
- 视觉效果使用默认蓝色+白色背景
- 这是正常行为，不影响其他功能测试

---

## 五、问题排查

### 播放按钮仍然不工作
1. **打开浏览器控制台（F12）**
2. 点击播放按钮
3. **检查日志：**
   - 应该看到：`🖱️ 播放按钮被点击`
   - 应该看到：`▶️ 开始播放动画`
   - 应该看到：`isPlaying = true`

4. **如果没有日志：**
   - 刷新页面（Ctrl+F5）
   - 清除浏览器缓存
   - 尝试无痕模式

### 视觉效果没有差异（都是白色+蓝色）
1. **打开控制台**
2. 点击例题加载
3. **检查日志：**
   - 应该看到：`🎨 加载例题的视觉参数: {objectColor: ...}`
   - 应该看到：`🎨 drawScene() 被调用`
   - 应该看到：`已应用视觉主题: {objectColor: ...}`

4. **如果 visual 为空：**
   - 检查 KNOWLEDGE_BASE 中例题是否有 visual 字段
   - 运行：`Object.keys(KNOWLEDGE_BASE.mechanics.topics.uniformMotion.examples[0])`
   - 应该包含 'visual'

### 例题弹窗不显示
1. **检查浏览器版本**
   - Chrome/Edge 90+
   - Firefox 88+
   - Safari 14+

2. **检查是否被广告拦截器阻止**
   - 弹窗使用 `position: fixed`，某些扩展可能阻止
   - 尝试禁用扩展

---

## 六、预期的控制台日志

### 正常流程（加载"汽车刹车"例题）
```
📖 加载例题: {title: "汽车刹车问题", ...}
🎨 加载例题的视觉参数: {objectType: "car", objectColor: "#ef4444", ...}
🎬 生成Canvas场景: {type: "uniform", v0: 20, a: -5, ...}
🎨 drawScene() 被调用
   ctx: true
   sceneParams: true
   canvas.width: 800
   canvas.height: 600
   准备绘制，尺寸: 800 x 600
   已应用视觉主题: {objectColor: "#ef4444", theme: "realistic", ...}
🎨 匀变速运动方向: horizontal
```

### AI 解析流程（输入"红色跑车刹车"）
```
🤖 开始AI解析...
🎨 AI返回的视觉参数: {objectType: "car", objectColor: "#ef4444", ...}
📚 检测到的知识点: ["uniformMotion"]
✓ 已识别为【匀变速直线运动】 - realistic风格
涉及知识点：匀变速直线运动
```

---

## 七、成功标准

### ✅ 全部通过的标志
- [ ] 播放按钮点击后物体移动
- [ ] 例题点击后显示详情弹窗
- [ ] 弹窗中有完整信息（题目+参数+按钮）
- [ ] 点击"查看可视化"后正确跳转
- [ ] 汽车刹车：灰色背景+红色物体
- [ ] 篮球投篮：米黄背景+橙色物体
- [ ] 卫星轨道：深色背景+星星+银色物体
- [ ] 控制台无错误（error）日志

### ⚠️ 可接受的警告
- 如果没有后端：`⚠️ 无法连接到本地后端` - 正常
- 字体加载失败 - 不影响功能
- Canvas性能警告 - 不影响测试

---

## 八、快速演示视频脚本（30秒）

1. **0-5s**: 打开页面，点击"知识点库"
2. **5-10s**: 点击"汽车刹车"，展示弹窗
3. **10-15s**: 点击"查看可视化"，展示红色+灰色背景
4. **15-20s**: 点击"播放"，展示动画运行
5. **20-25s**: 切换到"卫星轨道"，展示深空+星星背景
6. **25-30s**: 播放卫星动画，完成

---

## 📞 如有问题

如果测试中遇到任何问题，请：

1. **截图控制台日志**（F12 → Console）
2. **截图可视化区域**
3. **记录操作步骤**
4. **浏览器和版本**（如：Chrome 120）

优先排查顺序：
1. 刷新页面（Ctrl+F5）
2. 清除缓存
3. 无痕模式测试
4. 检查控制台错误
5. 查看文档《问题修复总结_视觉差异化.md》
