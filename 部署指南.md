# Physics Visual éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å°†æœ¬åœ°è°ƒæ•´å¥½çš„ä»£ç æ¨é€åˆ° GitHub å¹¶éƒ¨ç½²åˆ° Cloudflareã€‚

---

## âœ… æœ¬åœ°å·²å®Œæˆçš„è°ƒæ•´

### 1. ä¿®å¤äº†å‰åç«¯æ•°æ®æ ¼å¼ä¸åŒ¹é…é—®é¢˜
- **é—®é¢˜**ï¼šWorker è¿”å› `{ok: true, raw: ..., parsed: {...}}`ï¼Œä½†å‰ç«¯æœŸæœ› `{success: true, type: ..., params: ..., reasoning: ...}`
- **è§£å†³**ï¼šä¿®æ”¹äº† `backend/worker/index.js`ï¼Œç°åœ¨è¿”å›å‰ç«¯æœŸæœ›çš„æ ¼å¼

### 2. æ”¹è¿›äº†é”™è¯¯æç¤º
- **åŠŸèƒ½**ï¼šå½“è§£æå¤±è´¥æ—¶ï¼Œæ ¹æ®åç«¯é…ç½®ï¼ˆæœ¬åœ° vs äº‘ç«¯ï¼‰æ˜¾ç¤ºä¸åŒçš„é”™è¯¯æç¤º
- **ä½ç½®**ï¼š`index1.0.3.html` å’Œ `dist/index.html`

### 3. å‡†å¤‡å¥½äº†éƒ¨ç½²æ–‡ä»¶
- `dist/index.html` - å·²æ›´æ–°ä¸ºæœ€æ–°ç‰ˆæœ¬ï¼ŒåŒ…å«æ‰€æœ‰ä¿®å¤
- `backend/worker/index.js` - å·²ä¿®å¤æ•°æ®æ ¼å¼é—®é¢˜
- `backend/worker/wrangler.toml` - Worker é…ç½®æ–‡ä»¶

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: æäº¤åˆ° Git å¹¶æ¨é€åˆ° GitHub

```powershell
# 1. æ£€æŸ¥å½“å‰çŠ¶æ€
git status

# 2. æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶
git add .

# 3. æäº¤æ›´æ”¹ï¼ˆä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯ï¼‰
git commit -m "ä¿®å¤å‰åç«¯æ•°æ®æ ¼å¼ä¸åŒ¹é…é—®é¢˜ï¼Œæ”¹è¿›é”™è¯¯æç¤º"

# 4. æ¨é€åˆ° GitHub
git push origin master
```

---

### æ­¥éª¤ 2: éƒ¨ç½² Cloudflare Workerï¼ˆåç«¯ï¼‰

```powershell
# 1. è¿›å…¥ Worker ç›®å½•
cd backend\worker

# 2. éƒ¨ç½² Worker
wrangler deploy

# 3. éªŒè¯éƒ¨ç½²ï¼ˆåº”è¯¥çœ‹åˆ°æ–°çš„ Version IDï¼‰
# é¢„æœŸè¾“å‡ºç±»ä¼¼ï¼š
# âœ” Deployed physics-visual-worker triggers (1.23 sec)
#   https://physics-visual-worker.yywf08125.workers.dev
```

**é‡è¦æç¤º**ï¼š
- ç¡®ä¿ä½ çš„ OpenAI API Key å·²ç»è®¾ç½®ï¼ˆå¦‚æœä¹‹å‰æ²¡è®¾ç½®æˆ–éœ€è¦æ›´æ–°ï¼‰ï¼š
  ```powershell
  wrangler secret put OPENAI_API_KEY
  # ç„¶åè¾“å…¥ä½ çš„ API key
  ```
- å¦‚æœæƒ³ä¿ç•™ mock æ¨¡å¼ç”¨äºæµ‹è¯•ï¼š
  ```powershell
  wrangler secret put MOCK_RESPONSE
  # è¾“å…¥ "true"
  ```

---

### æ­¥éª¤ 3: éƒ¨ç½²åˆ° Cloudflare Pagesï¼ˆå‰ç«¯ï¼‰

```powershell
# 1. å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..\..

# 2. éƒ¨ç½²åˆ° Pages
wrangler pages deploy .\dist --project-name=physics-visual

# 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ
# é¢„æœŸè¾“å‡ºï¼š
# âœ” Success! Uploaded 1 files
# âœ” Deployment complete!
#   Preview URL: https://xxxxxxxx.physics-visual.pages.dev
#   Production URL: https://physics-visual.pages.dev
```

---

### æ­¥éª¤ 4: éªŒè¯éƒ¨ç½²

#### 4.1 æµ‹è¯• Worker
```powershell
# ä½¿ç”¨ PowerShell æµ‹è¯• Worker API
Invoke-RestMethod -Uri "https://physics-visual-worker.yywf08125.workers.dev/api/parse-problem" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"description":"ä¸€ä¸ªç‰©ä½“ä»é™æ­¢å¼€å§‹è‡ªç”±ä¸‹è½5ç§’"}' | ConvertTo-Json -Depth 10
```

**é¢„æœŸè¾“å‡º**ï¼š
```json
{
    "success": true,
    "type": "uniform",
    "params": {
        "v0": 0,
        "a": 10,
        "time": 5
    },
    "reasoning": "é»˜è®¤ä¸ºè‡ªç”±è½ä½“ï¼ˆåŒ€å˜é€Ÿç›´çº¿è¿åŠ¨ï¼‰ã€‚"
}
```

#### 4.2 æµ‹è¯•å‰ç«¯é¡µé¢
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`https://physics-visual.pages.dev`
2. åœ¨"é¢˜ç›®æè¿°"æ¡†ä¸­è¾“å…¥ï¼š`ä¸€ä¸ªç‰©ä½“ä»é™æ­¢å¼€å§‹è‡ªç”±ä¸‹è½5ç§’`
3. ç‚¹å‡»"ä»æ–‡å­—è§£æå‚æ•°"æŒ‰é’®
4. åº”è¯¥çœ‹åˆ°ï¼š
   - é¢˜å‹è‡ªåŠ¨åˆ‡æ¢åˆ°"åŒ€å˜é€Ÿç›´çº¿è¿åŠ¨"
   - å‚æ•°è‡ªåŠ¨å¡«å……ï¼šåˆå§‹é€Ÿåº¦=0, åŠ é€Ÿåº¦=10, æ—¶é—´=5
   - æˆåŠŸæç¤ºï¼š`âœ“ å·²è¯†åˆ«ä¸ºã€åŒ€å˜é€Ÿç›´çº¿è¿åŠ¨ã€‘é»˜è®¤ä¸ºè‡ªç”±è½ä½“ï¼ˆåŒ€å˜é€Ÿç›´çº¿è¿åŠ¨ï¼‰ã€‚`

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: Worker éƒ¨ç½²åä»è¿”å›æ—§æ ¼å¼
**è§£å†³æ–¹æ¡ˆ**ï¼š
```powershell
cd backend\worker
wrangler deploy --force
```

### é—®é¢˜ 2: Pages æ˜¾ç¤ºæ—§ç‰ˆæœ¬
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç­‰å¾… 1-2 åˆ†é’Ÿè®© CDN ç¼“å­˜æ›´æ–°
2. å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl + Shift + Rï¼‰
3. æˆ–è€…åœ¨ Cloudflare Dashboard æ¸…é™¤ç¼“å­˜

### é—®é¢˜ 3: ä»ç„¶æ˜¾ç¤º"è§£æå¤±è´¥"
**æ£€æŸ¥æ¸…å•**ï¼š
1. ç¡®è®¤ Worker å·²æˆåŠŸéƒ¨ç½²ï¼ˆä½¿ç”¨ä¸Šé¢çš„ PowerShell æµ‹è¯•å‘½ä»¤ï¼‰
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ Network æ ‡ç­¾
3. ç‚¹å‡»"ä»æ–‡å­—è§£æå‚æ•°"å¹¶æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼š
   - è¯·æ±‚ URL åº”è¯¥æ˜¯ `https://physics-visual-worker.yywf08125.workers.dev/api/parse-problem`
   - çŠ¶æ€ç åº”è¯¥æ˜¯ 200
   - å“åº”åº”è¯¥åŒ…å« `"success": true`
4. æ£€æŸ¥ Console æ ‡ç­¾æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 4: CORS é”™è¯¯
**åŸå› **ï¼šWorker çš„ CORS å¤´å·²é…ç½®ï¼Œä½†å¦‚æœå‡ºç°é—®é¢˜ï¼š
1. ç¡®è®¤ `backend/worker/index.js` ä¸­çš„ `corsHeaders()` å‡½æ•°å­˜åœ¨
2. é‡æ–°éƒ¨ç½² Worker

---

## ğŸ“ æ–‡ä»¶å˜æ›´æ‘˜è¦

### ä¿®æ”¹çš„æ–‡ä»¶ï¼š
1. **backend/worker/index.js**
   - ä¿®æ”¹è¿”å›æ ¼å¼ä» `{ok, raw, parsed}` åˆ° `{success, type, params, reasoning}`
   - æ›´æ–° mock å‡½æ•°å‚æ•°åç§°ï¼ˆ`g` â†’ `a`ï¼Œæ·»åŠ  `v0`ï¼‰
   - æ”¹è¿›ä¸­æ–‡æç¤ºä¿¡æ¯

2. **index1.0.3.html**
   - æ”¹è¿›é”™è¯¯å¤„ç†é€»è¾‘ï¼ˆåŒºåˆ†æœ¬åœ°/äº‘ç«¯ï¼‰
   - å·²å¤åˆ¶åˆ° `dist/index.html`

### é…ç½®æ–‡ä»¶ï¼š
- `backend/worker/wrangler.toml` - æ— éœ€ä¿®æ”¹
- `.gitignore` - å»ºè®®æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰ï¼š
  ```
  node_modules/
  .wrangler/
  .dev.vars
  dist/.DS_Store
  ```

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **è®¾ç½®è‡ªåŠ¨éƒ¨ç½²**ï¼š
   - åœ¨ Cloudflare Pages ä¸­è¿æ¥ GitHub ä»“åº“
   - æ¯æ¬¡ push åˆ° master åˆ†æ”¯æ—¶è‡ªåŠ¨éƒ¨ç½²

2. **ç›‘æ§å’Œæ—¥å¿—**ï¼š
   - åœ¨ Cloudflare Dashboard æŸ¥çœ‹ Worker æ—¥å¿—
   - ç›‘æ§ API è°ƒç”¨æ¬¡æ•°å’Œé”™è¯¯ç‡

3. **ä¼˜åŒ–**ï¼š
   - è€ƒè™‘æ·»åŠ è¯·æ±‚ç¼“å­˜
   - æ·»åŠ æ›´å¤šçš„é”™è¯¯ç±»å‹åˆ¤æ–­
   - æ”¹è¿› AI æç¤ºè¯ä»¥æé«˜è§£æå‡†ç¡®ç‡

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Git æ˜¯å¦æ­£ç¡®æ¨é€ï¼ˆ`git log` æŸ¥çœ‹æœ€æ–°æäº¤ï¼‰
2. Cloudflare è´¦æˆ·æƒé™
3. Worker å’Œ Pages çš„éƒ¨ç½²æ—¥å¿—

**å¿«é€Ÿè¯Šæ–­å‘½ä»¤**ï¼š
```powershell
# æ£€æŸ¥ Git çŠ¶æ€
git status
git log -1

# æ£€æŸ¥ Worker çŠ¶æ€
cd backend\worker
wrangler whoami
wrangler deployments list

# æ£€æŸ¥ Pages éƒ¨ç½²
cd ..\..
wrangler pages deployments list --project-name=physics-visual
```

---

**æœ€åæ›´æ–°**: 2025å¹´10æœˆ20æ—¥
