# 知识点导入功能使用指南

## 📥 功能说明

现已在"物理知识点库"区域添加了**导入知识点**和**导出备份**两个按钮，支持快速构建个人知识库。

---

## 📝 Word 文档格式要求

### 推荐格式（层级结构）

系统支持以下格式的 Word 文档：

```
一、力学
  1. 匀变速直线运动
     公式：v = v₀ + at
     公式：s = v₀t + ½at²
     描述：物体在恒定加速度作用下的直线运动
     例题：汽车刹车问题
     一辆汽车以20m/s的速度行驶，突然刹车，加速度为-5m/s²，求刹车距离。
     
  2. 抛体运动
     公式：x = v₀cosθ·t
     公式：y = h + v₀sinθ·t - ½gt²
     描述：物体在重力作用下的曲线运动
     例题：篮球投篮
     篮球以10m/s的速度、45°角投出，离地高度2m，求飞行时间。

二、电磁学
  1. 磁场中的带电粒子运动
     公式：F = qvB
     公式：r = mv/(qB)
     描述：带电粒子在磁场中受洛伦兹力作用的圆周运动
     例题：电子在磁场中运动
     电子以1×10⁶m/s速度垂直进入0.5T的磁场，求运动半径。
```

---

## 🔧 格式规则详解

### 1️⃣ 一级标题（分类）
支持以下格式：
- `一、力学`
- `二、电磁学`
- `1. 运动学`
- `2. 能量与动量`

**识别规则：**
- 以"一、二、三..."或"1. 2. 3..."开头
- 包含物理学科关键词（力、电、磁、光、热、运动、能量）

### 2️⃣ 二级标题（知识点）
支持以下格式：
- `1. 匀变速直线运动`
- `【牛顿运动定律】`

**识别规则：**
- 以数字+点号开头（如 `1. 2. 3.`）
- 或用【】包裹（如 `【动量守恒】`）

### 3️⃣ 公式
- 关键词：`公式：`
- 示例：`公式：v = v₀ + at`
- 可以有多行公式

### 4️⃣ 描述
- 关键词：`描述：` 或 `说明：`
- 示例：`描述：物体在恒定加速度下的运动`
- 如果没有关键词，第一段文字会被识别为描述

### 5️⃣ 例题
- 关键词：`例题：` 或 `例1：` 或 `例题1：`
- 例题标题后的文本会被识别为题目描述
- 支持多道例题

---

## 🎯 快速示例

### 示例1：简洁格式
```
一、力学
1. 匀变速运动
公式：v = v₀ + at
公式：s = v₀t + ½at²
例题：汽车以20m/s刹车，加速度-5m/s²，求停车距离。

2. 抛体运动
公式：x = v₀cosθ·t
例题：小球以10m/s、45°角抛出，求射程。
```

### 示例2：详细格式
```
一、力学（经典物理核心）

1. 匀变速直线运动
   公式：v = v₀ + at（速度-时间关系）
   公式：s = v₀t + ½at²（位移-时间关系）
   公式：v² - v₀² = 2as（速度-位移关系）
   描述：物体在恒定加速度作用下的直线运动，包括匀加速和匀减速
   
   例题1：汽车刹车问题
   一辆汽车以20m/s的速度行驶，司机突然发现前方有障碍物，
   立即刹车，加速度大小为5m/s²，求：
   (1) 刹车后4秒的速度
   (2) 刹车距离
   
   例题2：火车启动
   火车从静止开始匀加速启动，加速度为2m/s²，求5秒后的速度和位移。
```

---

## 🚀 使用步骤

### 第一步：准备 Word 文档
1. 打开 Microsoft Word
2. 按照上述格式编写知识点
3. 保存为 `.docx` 格式

### 第二步：导入知识点
1. 打开 `index1.0.3.html`
2. 滚动到"物理知识点库"区域
3. 点击蓝色的 **📥 导入知识点** 按钮
4. 选择你的 Word 文档
5. 等待解析（通常2-5秒）

### 第三步：预览确认
系统会显示预览对话框，包含：
- 📊 导入统计（分类数、知识点数、例题数）
- 📚 知识点详情列表
- ✅ 确认导入 或 取消按钮

### 第四步：使用知识点
导入成功后：
- 知识点立即显示在页面上
- 点击分类→查看知识点→点击例题→生成可视化
- 数据保存在 localStorage，刷新页面不丢失

---

## 💾 数据管理

### 导出备份
1. 点击绿色的 **📥 导出备份** 按钮
2. 自动下载 JSON 格式备份文件
3. 文件名：`知识点备份_2025-01-XX.json`

### 恢复备份
目前需要手动导入：
1. 打开浏览器控制台（F12）
2. 运行以下代码：
```javascript
// 粘贴备份文件的内容到这里
const backup = { ... };
localStorage.setItem('customKnowledgeBase', JSON.stringify(backup));
location.reload();
```

---

## ⚠️ 注意事项

### 文档格式建议
- ✅ 使用清晰的层级结构
- ✅ 每个知识点至少包含公式或描述
- ✅ 例题尽量包含具体数值
- ✅ 保持格式统一（缩进、标点）

### 常见问题

**Q1: 导入后没有显示知识点？**
- 检查文档是否包含一级标题（一、二、三 或 1. 2. 3.）
- 检查文档内容是否为空
- 打开浏览器控制台（F12）查看错误信息

**Q2: 解析结果不准确？**
- 确保使用推荐格式
- 公式前加"公式："标记
- 例题前加"例题："标记

**Q3: 如何删除导入的知识点？**
```javascript
// 打开控制台（F12）运行
localStorage.removeItem('customKnowledgeBase');
location.reload();
```

**Q4: 导入的知识点能否编辑？**
目前不支持在线编辑，需要：
1. 修改原 Word 文档
2. 删除旧数据（见 Q3）
3. 重新导入

---

## 📊 解析示例

### 输入文档
```
一、力学
1. 匀变速运动
公式：v = v₀ + at
描述：恒定加速度下的运动
例题：汽车以20m/s刹车，a=-5m/s²，求停车距离。
```

### 解析结果
```json
{
  "custom_1234567890": {
    "name": "力学",
    "icon": "📐",
    "color": "#3b82f6",
    "topics": {
      "topic_1234567891": {
        "id": "topic_1234567891",
        "name": "匀变速运动",
        "difficulty": 2,
        "formulas": ["v = v₀ + at"],
        "description": "恒定加速度下的运动",
        "relatedTypes": ["uniform"],
        "keywords": [],
        "examples": [{
          "title": "汽车以20m/s刹车，a=-5m/s²，求停车距离。",
          "description": "汽车以20m/s刹车，a=-5m/s²，求停车距离。",
          "params": {},
          "type": "uniform"
        }]
      }
    }
  }
}
```

---

## 🎨 高级技巧

### 技巧1：批量导入
准备多个文档，分类导入：
- `力学知识点.docx`
- `电磁学知识点.docx`
- `光学知识点.docx`

每个文档只包含一个大类，方便管理。

### 技巧2：自动识别题型
在知识点名称中包含关键词：
- "抛体" → 自动识别为 projectile 类型
- "圆周" → 自动识别为 circular 类型
- "碰撞" → 自动识别为 collision 类型

### 技巧3：富文本支持
Word 中的特殊符号会保留：
- 希腊字母：θ, α, β, γ, Δ
- 上下标：v₀, m/s², x²
- 数学符号：≤, ≥, ≈, ±

---

## 📞 需要什么文档格式？

请回复以下信息：

1. **你的 Word 文档大致是什么格式？**
   - 层级结构（一、二、三）？
   - 表格形式？
   - 自由文本？

2. **包含哪些内容？**
   - 知识点名称
   - 公式
   - 描述/说明
   - 例题
   - 其他（图片、解答步骤等）

3. **大概有多少知识点？**
   - 几个分类？
   - 每个分类多少知识点？
   - 每个知识点多少例题？

我会根据你的实际文档格式优化解析逻辑，确保能准确导入！
